(function(){"use strict";function e(){l(m,n);delete c[u]}function t(e){if(!v)return;v.parentNode.removeChild(v);l(y,t);if(e&&e.type!=y)history.back();x=false}function r(e,t){var r=e.dataset,n=e.innerHTML,s=e.getAttribute("href"),l,c;r.button=t+1;r.label=n;r.origin=a(location.href);r.referer=location.href;c=s+"&"+o(r);l=i("width:0px;height:24px;");l.src=c;e.innerHTML="";e.parentNode.replaceChild(l,e);return{element:e,iframe:l}}function n(e){if(typeof e.data!="string")return;var r=e.data.split("|");if(r[0]!="mailster")return;switch(r[1]){case"d":var n=w[r[4]-1].iframe;n.style.width=r[2]+"px";n.style.height=r[3]+"px";break;case"s":if(x)break;var n=i("left:0px;top:0px;width:100%;height:100%;z-index:999999;position:fixed !important;",function(){w[r[4]-1].iframe.contentWindow.postMessage("l",r[2]);s(y,t);history.pushState(f,f,location.href)});n.src=r[2];d.getElementsByTagName("body")[0].appendChild(n);v=n;x=true;break;case"c":t();break}}function i(e,t){var r=d.createElement("iframe");r[b]("frameBorder","0");r[b]("allowtransparency","true");r[b]("scrolling","no");r.style.cssText=g+e;r.onload=function(){r.style.visibility="visible";t&&t()};return r}function a(e){var t=e.split("/");return t[0]+"//"+t[2]}function o(e,t,r){var n=[],i;Object.keys(e).forEach(function(a){var o=a;t&&!isNaN(o)?o=t+o:"";var o=encodeURIComponent(o.replace(/[!'()*]/g,escape));r?o=r+"["+o+"]":"";if(typeof e[a]==="object"){var s=build_query(e[a],f,o);n.push(s)}else{var l=encodeURIComponent(e[a].replace(/[!'()*]/g,escape));if(l=="true")l="1";if(l=="false")l="0";(i=a.match(/^user([A-Z].*)/))?n.push("userdata["+i[1].toLowerCase()+"]="+l):n.push(o+"="+l)}});return n.join("&")}function s(e,t,r){c.addEventListener?c.addEventListener(e,t,!!r):c.attachEvent("on"+e,t)}function l(e,t){c.removeEventListener?c.removeEventListener(e,t):c.detachEvent("on"+e,t)}var c=window,d=document,u="MailsterSubscribe",f=null,p=".mailster-subscribe-button",h=d.querySelectorAll(p),v,b="setAttribute",m="message",y="popstate",g="border:0;overflow:hidden;visibility:hidden;display:inline-block;margin:0px !important;padding:0px !important;background:transparent;",x=false,w=[],E;if(c[u].loaded)return;for(E=h.length-1;E>=0;E--){w[E]=r(h[E],E)}s(m,n);c[u]={loaded:true,destroy:e,close:t}})();