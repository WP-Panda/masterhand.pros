jQuery(document).ready(function(a){"use strict";a("body").on("submit.mailster","form.mailster-ajax-form",function(e){e.preventDefault();var s=a(this),r=s.serialize(),i=a('<div class="mailster-form-info"></div>'),t;if("function"===typeof window.mailster_pre_submit){t=window.mailster_pre_submit.call(this,r);if(t===false)return false;if(typeof t!=="undefined")r=t}s.addClass("loading").find(".submit-button").prop("disabled",true);a.post(s.attr("action"),r,o,"JSON").fail(function(s,e,r){var i;try{i=JSON.parse(s.responseText);if(!i.html){i={html:"There was an error with the response:<br><code>["+i.code+"] "+i.message+"</code>",success:false}}}catch(e){i={html:"There was an error while parsing the response:<br><code>"+s.responseText+"</code>",success:false}}o(i);if(console)console.error(s.responseText)});function o(e){s.removeClass("loading has-errors").find("div.mailster-wrapper").removeClass("error");s.find(".mailster-form-info").remove();if("function"===typeof window.mailster_post_submit){t=window.mailster_post_submit.call(s[0],e);if(t===false)return false;if(typeof t!=="undefined")e=t}s.find(".submit-button").prop("disabled",false);if(e.html)i.html(e.html);if(a(document).scrollTop()<s.offset().top){i.prependTo(s)}else{i.appendTo(s)}if(e.success){if(!s.is(".is-profile"))s.find(".mailster-form-fields").slideUp(100).find(".mailster-wrapper").find(":input").prop("disabled",true).filter(".input").val("");e.redirect?location.href=e.redirect:i.show().addClass("success")}else{if(e.fields)a.each(e.fields,function(e){s.addClass("has-errors").find(".mailster-"+e+"-wrapper").addClass("error")});i.show().addClass("error")}}})});