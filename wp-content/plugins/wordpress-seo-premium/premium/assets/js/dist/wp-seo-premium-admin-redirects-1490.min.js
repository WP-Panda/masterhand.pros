(window.yoastPremiumWebpackJsonp=window.yoastPremiumWebpackJsonp||[]).push([[3],{391:function(e,t,r){"use strict";var i=r(78),o=a(r(392)),n=a(r(393)),s=a(r(394));function a(e){return e&&e.__esModule?e:{default:e}}!function(e){var t=1,r=2,a=0,d=13,l=new s.default;e.widget("ui.dialog",e.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:function(e){this.close(e)}})}}),e.fn.wpseoRedirects=function(s){var c=this,u=s.replace("table-",""),p=!1,h=void 0,f=null,g=function(){p=!1,h=null},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.buttonValue,i=e.className;return{text:r,class:void 0===i?"button":i,click:function(){null!==t&&t(),jQuery(this).dialog("close")}}};this.getButtons=function(e){return"default"===e?[m({buttonValue:wpseoPremiumStrings.button_ok})]:[m({buttonValue:wpseoPremiumStrings.button_cancel},function(){g()}),m({buttonValue:wpseoPremiumStrings.button_save_anyway,className:"button-primary"},function(){p=!0,h(),g()})]},this.rowCells=function(e){var i=e.find(".val");return{origin:i.eq(t),target:i.eq(r),type:i.eq(a)}},this.dialog=function(t,r,i){void 0!==i&&"error"!==i||(i="default");var o=this.getButtons(i);e("#YoastRedirectDialogText").html(r),e("#YoastRedirectDialog").dialog({title:t,width:500,draggable:!1,resizable:!1,position:{at:"center center",my:"center center",of:window},buttons:o,modal:!0,close:function(){f&&f.focus()}})},this.openDialog=function(e){this.dialog(e.title,e.message)},this.post=function(t,r){e.post(ajaxurl,t,r,"json")},this.editRow=function(t){e("#the-list").find("#inline-edit").length>0?this.dialog(wpseoPremiumStrings.edit_redirect,wpseoPremiumStrings.editing_redirect):(l.setup(t,this.rowCells(t)),l.show(),new o.default(l.quickEditRow).getTypeField().trigger("change"))},this.createRedirectRow=function(t,r,i,o){var n=["val"];return o.isTargetRelative&&""!==r&&"/"!==r||n.push("remove-slashes"),o.hasTrailingSlash&&n.push("has-trailing-slash"),e("<tr>").append(e("<th>").addClass("check-column").attr("scope","row").append(e("<input>").attr("name","wpseo_redirects_bulk_delete[]").attr("type","checkbox").val(_.escape(t)))).append(e("<td>").addClass("type column-type has-row-actions column-primary").append(e("<div>").addClass("val type").html(_.escape(i))).append(e("<div>").addClass("row-actions").append(e("<span>").addClass("edit").append(e("<a>").attr({href:"#",role:"button",class:"redirect-edit"}).html(wpseoPremiumStrings.editAction)).append(" | ")).append(e("<span>").addClass("trash").append(e("<a>").attr({href:"#",role:"button",class:"redirect-delete"}).html(wpseoPremiumStrings.deleteAction))))).append(e("<td>").addClass("column-old").append(e("<div>").addClass("val").html(_.escape(t)))).append(e("<td>").addClass("column-new").append(e("<div>").addClass(n.join(" ")).html(_.escape(r))))},this.handleError=function(e,t){e.addValidationError(t.message,t.fields),"warning"===t.type&&c.dialog(wpseoPremiumStrings.error_saving_redirect,t.message,t.type)},this.addRedirect=function(){var t=new o.default(e(".wpseo-new-redirect-form")),r=new n.default(t,u);if(!1===r.validate())return!1;var i=r.getFormValues();return c.post({action:"wpseo_add_redirect_"+u,ajax_nonce:e(".wpseo_redirects_ajax_nonce").val(),redirect:{origin:encodeURIComponent(i.origin),target:encodeURIComponent(i.target),type:i.type},ignore_warning:p},function(i){if(i.error)return c.handleError(r,i.error),!0;t.getOriginField().val(""),t.getTargetField().val(""),c.find(".no-items").remove();var o=c.createRedirectRow(i.origin,i.target,i.type,i.info);e("form#"+u).find("#the-list").prepend(o),c.openDialog(wpseoPremiumStrings.redirect_added)}),!0},this.updateRedirect=function(){var t=new o.default(l.getForm()),r=new n.default(t,u);if(!1===r.validate())return!1;var i=r.getFormValues(),s=l.getRow(),a=this.rowCells(s);return c.post({action:"wpseo_update_redirect_"+u,ajax_nonce:e(".wpseo_redirects_ajax_nonce").val(),old_redirect:{origin:encodeURIComponent(a.origin.html()),target:encodeURIComponent(a.target.html()),type:encodeURIComponent(a.type.html())},new_redirect:{origin:encodeURIComponent(i.origin),target:encodeURIComponent(i.target),type:encodeURIComponent(i.type)},ignore_warning:p},function(e){if(e.error)return c.handleError(r,e.error),!0;a.origin.html(_.escape(e.origin)),a.target.html(_.escape(e.target)),a.type.html(_.escape(e.type)),l.remove(),c.openDialog(wpseoPremiumStrings.redirect_updated)}),!0},this.deleteRedirect=function(t){var r=this,o=this.rowCells(t),n=o.origin.html(),s=o.target.html(),a=o.type.html();(0,i.wpseoDeleteRedirect)(n,s,a,u).then(function(r){t.fadeTo("fast",0).slideUp(function(){e(this).remove()}),c.openDialog(r)}).catch(function(e){r.dialog(e.title,e.message,"error")})},this.setup=function(){var t=void 0;e("body").append('<div id="YoastRedirectDialog"><div id="YoastRedirectDialogText"></div></div>'),e(window).on("beforeunload",function(){if(e("#the-list").find("#inline-edit").length>0)return wpseoPremiumStrings.unsaved_redirects}),e(".redirect-table-tab").on("change","select[name=wpseo_redirects_type]",function(t){var r=parseInt(e(t.target).val(),10),o=e(t.target).closest(".wpseo_redirect_form").find(".wpseo_redirect_target_holder");jQuery.inArray(r,i.ALLOW_EMPTY_TARGET)>-1?e(o).hide():e(o).show()}),e(".wpseo-new-redirect-form").on("click",".button-primary",function(){return h=function(){c.addRedirect()},c.addRedirect(),f=e(this),!1}).on("keypress","input",function(e){e.which===d&&(h=function(){c.addRedirect()},e.preventDefault(),c.addRedirect())}),e(".wp-list-table").on("click",".redirect-edit",function(r){t=e(r.target).closest("tr"),r.preventDefault(),c.editRow(t),f=e(this)}).on("click",".redirect-delete",function(r){t=e(r.target).closest("tr"),r.preventDefault(),c.deleteRedirect(t),f=e("#cb-select-all-1")}).on("keypress","input",function(e){e.which===d&&(h=function(){c.updateRedirect()},e.preventDefault(),c.updateRedirect())}).on("click",".save",function(){(h=function(){c.updateRedirect()})()}).on("click",".cancel",function(){h=null,l.remove(),t.find(".redirect-edit").focus()})},c.setup()},e(function(){e.each(e(".redirect-table-tab"),function(t,r){e(r).wpseoRedirects(e(r).attr("id"))}),e("#wpseo_redirects_type").select2({width:"400px",language:wpseoUserLocale,dropdownCssClass:"yoast-select__dropdown"})})}(jQuery)},392:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.form=e};i.prototype.getOriginField=function(){return this.form.find("input[name=wpseo_redirects_origin]")},i.prototype.getTargetField=function(){return this.form.find("input[name=wpseo_redirects_target]")},i.prototype.getTypeField=function(){return this.form.find("select[name=wpseo_redirects_type]")},i.prototype.clearErrorMessage=function(){this.form.find(".wpseo_redirect_form .form_error").remove()},i.prototype.setErrorMessage=function(e){this.form.find(".wpseo_redirect_form").prepend('<div class="form_error error"><p>'+e+"</p></div>")},i.prototype.removeRowHighlights=function(){this.form.find(".redirect_form_row").removeClass("field_error")},i.prototype.highLightRowErrors=function(e){for(var t=0;t<e.length;t++)switch(e[t]){case"origin":this.highlightRow(this.getOriginField());break;case"target":this.highlightRow(this.getTargetField());break;case"type":this.highlightRow(this.getTypeField())}},i.prototype.highlightRow=function(e){jQuery(e).closest("div.redirect_form_row").addClass("field_error")},t.default=i},393:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(78),o=function(e,t){this.form=e,this.type=t,this.validationError=""};o.prototype.validate=function(){return this.form.clearErrorMessage(),this.form.removeRowHighlights(),!1!==this.runValidation(this.form.getOriginField(),this.form.getTargetField(),this.form.getTypeField())||(this.addValidationError(this.validationError),!1)},o.prototype.runValidation=function(e,t,r){if(""===e.val())return this.form.highlightRow(e),"plain"===this.type?this.setError(wpseoPremiumStrings.error_old_url):this.setError(wpseoPremiumStrings.error_regex);if(-1===jQuery.inArray(parseInt(r.val(),10),i.ALLOW_EMPTY_TARGET)){if(""===t.val())return this.form.highlightRow(t),this.setError(wpseoPremiumStrings.error_new_url);if(t.val()===e.val())return this.form.highlightRow(t),this.setError(wpseoPremiumStrings.error_circular)}return""!==r.val()||(this.form.highlightRow(r),this.setError(wpseoPremiumStrings.error_new_type))},o.prototype.setError=function(e){return this.validationError=e,!1},o.prototype.addValidationError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.form.setErrorMessage(e),void 0!==t&&this.form.highLightRowErrors(t)},o.prototype.getFormValues=function(){var e={origin:this.form.getOriginField().val().toString(),target:this.form.getTargetField().val().toString(),type:this.form.getTypeField().val().toString()};return jQuery.inArray(parseInt(e.type,10),i.ALLOW_EMPTY_TARGET)>-1&&(e.target=""),e},t.default=o},394:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){this.row=null,this.quickEditRow=null,this.templateQuickEdit=wp.template("redirects-inline-edit")};i.prototype.setup=function(e,t){this.row=e,this.quickEditRow=jQuery(this.templateQuickEdit({origin:_.unescape(t.origin.html()),target:_.unescape(t.target.html()),type:parseInt(t.type.html(),10),suffix:jQuery("#the-list").find("tr").index(e)}))},i.prototype.getRow=function(){return this.row},i.prototype.getForm=function(){return this.quickEditRow},i.prototype.show=function(){this.row.addClass("hidden"),this.quickEditRow.insertAfter(this.row).show(400,function(){jQuery(this).find(":input").first().focus()})},i.prototype.remove=function(){this.row.removeClass("hidden"),this.quickEditRow.remove()},t.default=i},78:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALLOW_EMPTY_TARGET=void 0,t.wpseoDeleteRedirect=o,t.wpseoRemoveNotification=n,t.wpseoUndoRedirect=function(e,t,r,i,s){o(e,t,r).then(function(e){!0===e.success&&n(s)})},t.wpseoCreateRedirect=function(e,t,r,i){var o="";if(410!==parseInt(t,10)&&""===(o=window.prompt(wpseoPremiumStrings.enter_new_url.replace("%s",e))))return void window.alert(wpseoPremiumStrings.error_new_url);jQuery.post(ajaxurl,{action:"wpseo_add_redirect_plain",ajax_nonce:r,redirect:{origin:e,target:o,type:t}},function(e){var r=jQuery(i).closest(".yoast-notification");if(jQuery(r).removeClass("updated").removeClass("error"),jQuery(r).find(".redirect_error").remove(),e.error)jQuery(r).addClass("error").prepend('<p class="redirect_error">'+e.error.message+"</p>");else{var o="";o=(o=410===parseInt(t,10)?wpseoPremiumStrings.redirect_saved_no_target:wpseoPremiumStrings.redirect_saved.replace("%2$s","<code>"+e.target+"</code>")).replace("%1$s","<code>"+e.origin+"</code>"),jQuery(r).addClass("updated").html("<p>"+o+"</p>")}},"json")};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(79));t.ALLOW_EMPTY_TARGET=[410,451];function o(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"plain";return(0,i.default)({method:"POST",url:wpApiSettings.root+"yoast/v1/redirects/delete",headers:{"X-WP-Nonce":wpApiSettings.nonce},data:{origin:e,target:t,type:r,format:o}})}function n(e){jQuery(e).closest(".yoast-notification").fadeOut("slow")}},79:function(e,t){e.exports=window.wp.apiFetch}},[[391,0]]]);